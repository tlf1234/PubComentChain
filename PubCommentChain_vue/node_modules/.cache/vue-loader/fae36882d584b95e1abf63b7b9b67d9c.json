{"remainingRequest":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HackSon\\tpp-master\\tpp_vue\\src\\views\\payment\\Payment.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\src\\views\\payment\\Payment.vue","mtime":1569206673000},{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907989000},{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645264055207},{"path":"D:\\HackSon\\tpp-master\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url('../../assets/css/payment.css');\n",{"version":3,"sources":["Payment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA","file":"Payment.vue","sourceRoot":"src\\views\\payment","sourcesContent":["<template>\n    <div class=\"d1\" id=\"payment\">\n        <div class=\"d2\">\n            <div class=\"i-title\">\n                <span class=\"f-name\">{{detail.cname}}</span>\n                <span class=\"count\">{{buyList.length}}张</span>\n            </div>\n            <div class=\"brief\">今天 {{time}} {{detail.time_start}}~{{detail.time_end}} ({{detail.d23}})</div>\n            <div class=\"brief\">{{cname}}</div>\n            <div class=\"brief\">\n                {{detail.room}} \n                <span style=\"padding:0px 2px\" v-for=\"(item,i) of buyList\" :key=\"i\">{{item.j+1}}排{{item.i+1}}座</span> \n            </div>\n        </div>\n        <div class=\"tpp-remark\"></div>\n        <div class=\"d3\">\n            <div class=\"dy-list-item\">\n                <div class=\"dy-list-label\">兑换券</div>\n                <div class=\"dy-list-extra\">无兑换券</div>\n            </div>\n            <div class=\"dy-list-item\">\n                    <div class=\"dy-list-label\">电影优惠券</div>\n                    <div class=\"dy-list-extra\" style=\"font-size: 13px;\">无优惠券</div>\n            </div>\n            <div class=\"dy-list-item\" style=\"border-top:1px solid rgba(0,0,0,.1)\">\n                    <div class=\"dy-list-label\">票价总计</div>\n                    <div class=\"dy-list-extra\">\n                        <span style=\"color: #ff2e62;\">{{(detail.price_e*buyList.length).toFixed(1)}}元</span>\n                    </div>\n            </div>\n            <div class=\"dy-whitespace\"></div>\n        </div>\n        <div class=\"d4\">\n                <div class=\"dy-list-item\">\n                    <div class=\"dy-list-label\">选购小食</div>\n                    <div class=\"dy-list-extra\" style=\"font-size:13px; right: 68px;\">边吃边看更爽哦</div>\n                    <div class=\"dy-list-thumbs\">\n                            <img :src=\"url+'payment/xiaoshi1.png'\" alt=\"\">\n                    </div>\n                </div>\n                <div class=\"dy-list-items\">\n                    <div class=\"dy-list-thumb\">\n                        <div class=\"div-list-poster\">\n                            <img style=\"width:100%;height:100%\" :src=\"url+'payment/shuangren.jpg'\" alt=\"\">\n                        </div>\n                    </div>\n                    <div class=\"dy-list-content\">\n                        <div class=\"dy-list-content-line\">\n                            <div class=\"dy-list-tag\">多人</div>\n                            <div class=\"dy-list-brief sales-desc\">爆米花大桶×1桶、大杯汽水（可乐/雪碧/芬达）×3杯</div>\n                        </div>\n                        <div class=\"dy-list-content-lines\">\n                            <div class=\"sales-price\">\n                                <span class=\"price red\">49.5元</span>\n                                <span class=\"stdPrice\">54元</span>\n                            </div>\n                            <div class=\"dy-list-value\">\n                                <div class=\"number-spinner-action\">\n                                    <a class=\"number-decrease\">\n                                        <img :src=\"url+'payment/jian.svg'\" alt=\"\">    \n                                    </a> \n                                </div>\n                                <div class=\"number-picker-wrapper\">0</div>\n                                <div class=\"number-spinner-action\">\n                                    <a class=\"number-increase\">\n                                        <img :src=\"url+'payment/increa.svg'\" alt=\"\">\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"dy-list-items\">\n                        <div class=\"dy-list-thumb\">\n                            <div class=\"div-list-posters\">\n                                <img style=\"width:100%;height:100%\" :src=\"url+'payment/danren.jpg'\" alt=\"\">\n                            </div>\n                        </div>\n                        <div class=\"dy-list-content\">\n                            <div class=\"dy-list-content-line\">\n                                <div class=\"dy-list-tag\">单人</div>\n                                <div class=\"dy-list-brief sales-desc\">爆米花小桶×1桶、大杯汽水（可乐/雪碧/芬达）×1杯</div>\n                            </div>\n                            <div class=\"dy-list-content-lines\">\n                                <div class=\"sales-price\">\n                                    <span class=\"price red\">23.1元</span>\n                                    <span class=\"stdPrice\">25.2元</span>\n                                </div>\n                                <div class=\"dy-list-value\">\n                                    <div class=\"number-spinner-action\">\n                                        <a class=\"number-decrease\">\n                                            <img :src=\"url+'payment/jian.svg'\" alt=\"\">\n                                        </a>\n                                    </div>\n                                    <div class=\"number-picker-wrapper\">0</div>\n                                    <div class=\"number-spinner-action\">\n                                        <a class=\"number-increase\">\n                                            <img :src=\"url+'payment/increa.svg'\" alt=\"\">\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                <div class=\"dy-list-item\" style=\"border-top:1px solid rgba(0,0,0,.1)\">\n                        <div class=\"dy-list-label\">小食总计</div>\n                        <div class=\"dy-list-extra\">\n                            <span style=\"color: #ff2e62;\">0元</span>\n                        </div>\n                </div>\n                <div class=\"dy-whitespace\"></div>\n            </div>\n            <div>\n                <div class=\"dy-list-item\">\n                    <div >购票须知</div>\n                </div>\n                <div>\n                    <div class=\"d6\"><div class=\"dy-list-brief\">1.请确认场次和时间无误，购买成功后将不予退换\n2.由于设备故障等不可抗力因素，存在少量场次取消的情况，会进行退票退款\n3.由于影院系统不稳定等因素，存在出票失败的情况，会进行退款\n4.取票码不再通过短信发送，可在“支付宝-卡券”或“淘票票-我的-电影票”中查看\n5.下单即代表你同意《淘票票用户服务协议》\n                    </div></div>\n                    \n                </div>\n            </div>\n            <div class=\"pay-bar\">\n                <div class=\"pay-tip\">\n                    <div class=\"lefts\">不支持退票、改签</div>\n                    <div class=\"rights\">\n                        <span class=\"action\">应付</span>\n                        <span class=\"amount\">{{(detail.price_e*buyList.length).toFixed(1)}}</span>\n                        <span class=\"yuan\">元</span>\n                    </div>\n                </div>\n                <div class=\"pay-btn\">\n                    <span style=\"color: #fff; font-size: 18px;\" @click=\"showPopup\">立即付款</span>\n                </div>\n                <van-popup v-model=\"show\">\n                    <div class=\"pay_cover\" @click=\"paymoney\">\n                       <img :src=\"url+'weixin.jpg'\" alt=\"\">   \n                       <h3>请扫码付款</h3>                  \n                    </div>\n                </van-popup>\n            </div>\n    </div>\n</template>\n<script>\nexport default {\n    data(){\n        return{\n            show:false, //弹出层\n            time:\"\",\n            cname:\"\",\n            buyList:[],\n            detail:{},\n        }\n    },\n    computed:{\n        url(){\n            return this.$store.state.url\n        },    \n    },\n    created(){\n        this.getData();\n        this.getTime();\n    },\n    methods:{\n        //向后台发请请求，把电影票的信息，添加到数据表中\n        paymoney(){\n            var mname=this.detail.cname;\n            var tdate=`${this.time} ${this.detail.time_start}~${this.detail.time_end}`\n            var d23=this.detail.d23;\n            var cname=this.cname;\n            var seat=[];\n            //遍历产生数组\n            for (var i=0;i<this.buyList.length;i++){  \n                seat.push(`${this.buyList[i].j+1}排${this.buyList[i].i+1}座`)\n            }\n            console.log(seat);\n            var obj={ mname,tdate,d23,cname,seat };\n            // return ;\n            this.axios({\n                method:\"post\",\n                 url:\"user/v1/ticket\",\n                 data:obj\n            }).then(res=>{\n                if(res.data.code==1){\n                    console.log(\"购买电影票成功\")\n                    //购买成功，跳转到ticket页面\n                    this.$router.push(\"/myticket\")\n                }else{\n                    console.log(\"购买电影票失败\")\n                }\n            })\n        },\n        showPopup(){    //弹出层显示\n            this.show=true;\n        },\n        //获取上个页面的数据\n        getData(){\n            // var detail=this.$route.query;\n            var obj=this.$store.getters.getSeatObj;\n            // console.log(detail)\n            this.cname=obj.cname.cname;\n            this.buyList=obj.buyList;\n            this.detail=obj.detail;  \n            console.log(this.buyList)                      \n        },\n        //计算今天的时间\n        getTime(){\n            var d=new Date();\n            var month=d.getMonth();\n            if(month+1<10){\n                month++;\n                month=\"0\"+month\n            }\n            var date=d.getDate();\n            if(date<10){\n                date=\"0\"+date;\n            }\n            this.time= `${month}-${date}`\n        }\n    }\n    \n\n\n}\n</script>\n<style>\n     @import url('../../assets/css/payment.css');\n</style>"]}]}